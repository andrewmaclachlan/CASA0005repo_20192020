--- 
title: "CASA0005 Geographic Information Systems and Science"
author: "Andy MacLachlan and Adam Dennett"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
output: bookdown::gitbook
documentclass: book
bibliography: [book.bib, packages.bib]
biblio-style: apalike
link-citations: yes
github-repo: andrewmaclachlan/CASA0005repo
description: "CASA"
twitter-handle: andymaclachlan
---

```{r include = FALSE}
htmltools::tagList(rmarkdown::html_dependency_font_awesome())
```

# Welcome {-}

<a href="https://www.ucl.ac.uk/bartlett/casa/"><img src="general_images/casa_logo.jpg" width="150" alt="CASA0005 course" align="right" style="margin: 0 1em 0 1em" /></a>

Welcome to the CASA0005 Geographic Information Systems and Science online pratical handbook. This website is hosted on GitHub and holds all the practical instructions and data. Data used within the practicals is available online, however occasionally websites can undergo maintenance or be inaccessible due to political factors such as government shutdowns. How to access this data is explained in [Hello GIS].

## Acknowledgement {-}

Thanks to the following people who have either contributed directly or provided code in repositories that have helped me style this book:

* [Jenny Bryan](https://twitter.com/JennyBryan)
* [STAT 545](https://stat545.com/index.html#other-contributors)
* [Hadley Wickham](https://twitter.com/hadleywickham)
* [Alison Presmanes Hill](https://twitter.com/apreshill)
* [Yihui Xie](https://twitter.com/xieyihui)
* [Robin Lovelace](https://twitter.com/robinlovelace)
* [Twitter for R programmers](https://www.t4rstats.com/index.html)
* [Matt Ng](https://twitter.com/mattnkm)
* [StatQuest with Josh Starmer](https://www.youtube.com/channel/UCtYLUTtgS3k1Fg4y5tAhLbw)

The artwork used within this book has been produced by [allison_horst](https://twitter.com/allison_horst) and you can find all the images on Allison's [stats illustration GitHub repository](https://github.com/allisonhorst/stats-illustrations)

I've certainly learnt a lot from their open code repositories!

<!--chapter:end:index.Rmd-->

# (PART\*) Course information {-}

# Hello GIS {-}

Spatial analysis can yield fascinating insights into geographical relationships. However, at times it can be difficult to work with. You will get lots of error messages and have software crash. The academic staff are here to help you work through these practicals but we do not know everything. It's a good idea to become familar with online sources of help, such as:

* Stack Exchange https://stackexchange.com/
* RStudio community https://community.rstudio.com/
* QGIS documemtation https://docs.qgis.org/3.4/en/docs/index.html
* R documentation https://www.rdocumentation.org/
* ArcGIS help pages https://support.esri.com/en

Want to see what you can do with spatial analysis...check out this 'What's Next' video produced for the ESRI conference...

```{r echo=FALSE, fig.align='center', cache=TRUE}
knitr::include_url("https://www.youtube.com/embed/K0qZffiKwak")
```
## Intended course learning outcomes {-}

After having taking this module, you should be able to:

* Develop a working knowledge of ArcMap, QGIS and R to support the application of GI Science techniques

* Visualise geographic information through producing appropriate maps to high cartographic standards

* Carry out spatial data management tasks (joining attribute to geometry data, cleaning data, converting between file formats and spatial reference systems)

* Interpret data and apply relevant spatial analyses (e.g. auto correlation/hot spot analysis, areal interpolation, point in polygon/buffer analysis, spatial statistical analysis) to answer a variety of spatial problems

* Explain and evaluate common issues with geographic data such as representation and uncertainty

* Apply and critique (spatial) statistical analysis techniques to infer relationships between spatial phenomena

* Experience the diversity of the global spatial data landscape and evaluate the relative drawbacks and merits of different spatial datasets

::: {.infobox .tip data-latex="{note}"}
There is a lot of information within this practical book and **we do not expect you to read everything we link to**. You should attend each lecture, go through every practical and do some associated reading. 

This is a 15 credit module, equivalent to 150 hours of study (including the taught sessions). Outside of our lectures and practical sessions (3 hours a week) **you should be spending an extra 12 hours a week on this module**. 
:::

## How to use this book {-}

To get the most out of this book spend a few minutes learning how to control it, in the top right of this webpage you will see this tools bar:

```{r echo=FALSE, out.width = "600pt", fig.align='center', cache=TRUE, message=FALSE}
knitr::include_graphics('general_images/Book_controls.png')
```

From left to right these buttons will let you:

* Control the side bar

* Search the entire book for a specific word

* Change the text size, font, colour

* Propose an edit if you see a mistake that I can review

* View the webpage in the 'raw' RMarkdown format, we cover RMarkdown in the course 

* Gives information about shortcuts for this book and most others like it

## Getting started {-}

One of the issues with GIS is that many of the files we will be working with are quite large. Fortunately in recent years UCL has seriously beefed up the storage available for students. You now get 100GB of free storage, which should be plenty for the work you will be doing this year! The Bartlett faculty has several gigabytes of storage space available on their central servers, so before we get started, we will connect to our N drive to carry out all of our practical work over the coming weeks. 

::: {.infobox .tip data-latex="{note}"}
The data we use in this practical book is representative of what you will find when conducting independent analysis. Some books and website will give you perfectly 'clean' and 'ready to use' data, we have not done this on purpose as it's very important to master data wrangling (also called data manipulation). In the 'real world' data is messy and it's vital you know how to deal with it. Take this quote from the [New York Times](https://www.nytimes.com/2014/08/18/technology/for-big-data-scientists-hurdle-to-insights-is-janitor-work.html) for example...

*"Data scientists, according to interviews and expert estimates, spend from 50 percent to 80 percent of their time mired in this more mundane labor of collecting and preparing unruly digital data, before it can be explored for useful nuggets."*

:::

## How to dowload data and files from GitHub {-}

Practical data is divided into the relevant sessions (e.g. prac1_data), although sometimes i'll refer to a dataset used within a previous week. 

In some of the practicals it will say to download the data from my GitHub. To do so you have a few options. Option 1 will download everything i have used to make the practicals and option 2 will let you download just a spceific folder (e.g. the data folders).

### Option 1 {-}

1. Go to the online repository page here: https://github.com/andrewmaclachlan/CASA0005repo

2. Click Clone or download, the download as ZIP. This will download the everything i have used to make this website including all the data for the practicals

```{r echo=FALSE, out.width = "500pt", fig.align='center', cache=TRUE}
knitr::include_graphics('index_images/downloadrepo.png') 
```

### Option 2 {-}

Use [DownGit](https://minhaskamal.github.io/DownGit/#/home)

1. Go to: https://minhaskamal.github.io/DownGit/#/home

2. Head over to the GitHub repository: https://github.com/andrewmaclachlan/CASA0005repo

3. Select a folder you wish to download --- here i'll use practical data as the example, click into the folder (prac6_data) and copy the url: https://github.com/andrewmaclachlan/CASA0005repo/tree/master/prac6_data

4. Paste it into DownGit and click Download, once downloaded then unzip the folder.

## Self guided learning {-}

The lectures and practicals of this course only form a part of the learning process. You are expected to undertake wider reading and explore new methods and approaches. We have provided guidance on useful resources throughout the course to use as a starting point but you are encouraged to go beyond our recommedations and fully engage with applied GIS research, methods and visualisation techniques.

If you find a practical particularly easy or straightforward then please move on to the next one. Practicals that look at analytical relationships also have extension activities for you to try.

```{r include=FALSE}
# automatically create a bib database for R packages
knitr::write_bib(c(
  .packages(), 'bookdown', 'knitr', 'rmarkdown'
), 'packages.bib')
```

## Interactive lectures {-}

During the lectures we will be using an interative polling and Q&A application called vevox. It's very simple to use, you can either:

* Download the app on iOS or Android: http://get.vevox.app 
* Use the web app: https://vevox.app/

The meeting ID we will use is: 186-395-009

## More help {-}

If you need specific assistance with this course please:

* Check the Moodle assessment tab for queries relating to assignments / deadlines. There is also an expected assignment timeline and frequently asked questions section within the assessment outline document.

* Speak to a member of the teaching team in the computer lab sessions

* Ask a question at the end of a lecture (time permitting)

* Ask a question on slack under the GIS channel--- you should have recevied an invite email from Steve Gray otherwise use [this link](https://join.slack.com/t/casastudents2019-2020/signup). The teaching team will monitor this --- use the #gis channel for this course.

Due to the size of the class we will **only reply** to messages **on slack** so all students can see the discussion. If you have a personal matter in relation to completing the course then please speak to or email Andy or Adam.

If you are struggling to use R don't worry...here is some advice from a tweet and  [interview](https://www.r-bloggers.com/advice-to-young-and-old-programmers-a-conversation-with-hadley-wickham/) with Hadley Wickham, chief scientist at RStudio...

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">You&#39;re doing it right if you get frustrated: if you&#39;re not frustrated, you&#39;re (probably) not stretching yourself mentally</p>&mdash; Hadley Wickham (@hadleywickham) <a href="https://twitter.com/hadleywickham/status/565516733516349441?ref_src=twsrc%5Etfw">11. Februar 2015</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> 
<br/>

> It’s easy when you start out programming to get really frustrated and think, “Oh it’s me, I’m really stupid,” or, “I’m not made out to program.” But, that is absolutely not the case. Everyone gets frustrated. I still get frustrated occasionally when writing R code. It’s just a natural part of programming. So, it happens to everyone and gets less and less over time. Don’t blame yourself. Just take a break, do something fun, and then come back and try again later.

You can also go through other free resources including: 

* [Free RStudio Education resources](https://education.rstudio.com)

* [Codeacademy](https://www.codecademy.com/learn/learn-r)

* [YaRrr! The Pirate's Guide to R](https://bookdown.org/ndphillips/YaRrr/)

At the end of every practical there is a link anonymous Google feeback form, let us know if something is unclear and we will go over it in a future session.

If after pursuing all these avenues you still need help you can book into our office hours. These meetings are **to discuss a geographical concept in relation to the material/assessment or for any personal matters relevant to the completion of the module**.

These meetings are **not** to be used for specific technical issues. Problems of this nature should be addressed in the practical sessions.

Andy: https://amaclachlan.youcanbook.me/ 

Adam: https://dr-d-casa.youcanbook.me

## Noticed a mistake? {-}

No one is perfect, if you notice a mistake let us know through the [GitHub issues tab](https://github.com/andrewmaclachlan/CASA0005repo/issues)

Don't worry if you are unsure about what GitHub is we cover it in the course.

## Assignment resources {-}

Want some tips for resources on your assignment?.... head over to the [Assignment resources] pages

## Reading list {-}

We link to books and resources throughout each practical and in the [Assignment resources] pages, but a full reading list for the course is provided [on the UCL library reading list page for the course](https://rl.talis.com/3/ucl/lists/139FBAF8-DACD-60FB-8BDC-E9C9E09BA885.html?lang=en-GB&login=1), there is also a link to it over on Moodle.

We've tried to mostly recommend open source and free books, any others are available from the library.


<!--chapter:end:00-course_info.Rmd-->

# Software installation {-}

This course primarily uses the R data science programming language and we strongly advise you complete the assignment using it. We briefly touch upon ArcMap and QGIS to give you a basic foundation in the range of spatial software available, please follow the instructions below before the first practical session to install the software on your local computer if you are planning to use it throughout the course. 

## ArcGIS {-}

ArcGIS should be installed as a standard programme in the UCL desktop and you can navigate to it from the Windows start button. 

### Installing ArcGIS on your own computer {-}
As a UCL student, you can install ArcGIS on your own computer. This is easy if you have a PC, but if you have a Mac this can be trickier as Arc will only run in a PC environment. If you have a Mac, the options open to you are either to:

a)	Run ArcGIS through the Desktop@UCL application --- http://www.ucl.ac.uk/isd/services/computers/remote-access/desktop 
b)	Duel boot your machine using bootcamp, install Windows (7 or 8 is fine) and then install Arc onto the Windows partition. 
c)	Install some kind of virtualisation software such as [Parallels](http://www.parallels.com/ca/products/desktop/) or [VMware](http://www.vmware.com/products/fusion/), and run Arc on a virtual windows machine

If you can, it is preferable to run Arc on Bootcamp as virtualisation software can be slow, but the Desktop@UCL facility should suffice for this course.
ArcGIS (Version 10.6 is the latest at time of writing, but may have already been superseded) can be downloaded from the [UCL Software Database](https://swdb.ucl.ac.uk/) for free

**Make sure** you read the instructions provided by the [UCL Software Database on how to activate ArcGIS](https://www.ucl.ac.uk/isd/how-to/how-to-activate-arcgis) fully if installing onto your own machine as you have to set the license correctly. 

### ArcGIS suite {-}

ArcGIS is actually a whole suite of software built and maintained by ESRI (http://www.esri.com/software/arcgis).Within the ArcGIS for Desktop suite you will find the following programmes:

* **ArcCatalog --- Similar to Windows Explorer, ArcCatalog allows you to manage your GIS files, folders and geodatabases**

* ArcGIS Administrator --- This programme us used to manage licences for the various elements of ArcGIS
 
* ArcGlobe --- ArcGlobe allows you to view and analyse your data in 3D –-- this interface looks very similar to Google Earth and is part of the 3D analyst extension

* **ArcMap --- This is the programme you will use most often –-- it is the main mapping and spatial analysis element of ArcGIS**

* ArcScene --- ArcScene is a 3D viewer which allows you to navigate and interact with your 3D raster and feature data

ArcCatalog and ArcMap are in bold as these are the only programmes we will be using explicitly in this course. By all means experiment with the others if you have any spare time! 

## QGIS {-}

QGIS is very similar to ArcMap except that as it is open-source and free there are many add on packages that (or plugins) that provide additional functionality to the software.  

To get QGIS on your personal machine go to: https://qgis.org/en/site/forusers/download.html

I install the OSGeo4W version. The nature of open-source means that several programs will rely on each other for features. OSGeo4W tracks all the shared requirements and does not install any duplicates. 

## R {-}

R is both a programming language and software environment, originally designed for statistical computing and graphics. R’s great strength is that it is open-source, can be used on any computer operating system and free for anyone to use and contribute to. Because of this, it is rapidly becoming the statistical language of choice for many academics and has a huge user community with people constantly contributing new packages to carry out all manner of statistical, graphical and importantly for us, geographical tasks.

### Setup 1 {-}

Search for and open RStudio.

You can install R Studio on your own machine from: https://www.rstudio.com/products/rstudio/download/#download

R studio requires R which you can download from: https://cran.rstudio.com/

RStudio is a free and open-source integrated development environment for R --- it makes R much easier to use.

If you are using a Mac and run into issues, firstly follow the instructions below then check out the [Mac R issues] section if the problem persists. 

### Setup 2 {-}

If you RStudio insn't installed on your practical room PC...fear not...the good people over at RStudio have created a [cloud version](https://rstudio.cloud/)...you have to sign up but can use it the same as the desktop version. It even works with Git and GitHub which we will cover later on in the course. The only real limitation is the upload file size --- if you have any kind of 'big data' then you will reach the allowed limit. That won't be a problem for the majority of this course except [Advanced raster analysis]...that said you can now link R to googledrive and access any data stored on it with the ```googledrive()``` [function](https://googledrive.tidyverse.org/) that is part of the ```tidyverse``` package. You could possibly do this one OneDrive too, but it's not as intuitive, have a look [here](https://stackoverflow.com/questions/29579782/reading-onedrive-files-to-r). But for now, don't worry about this, just note it for future reference. 

RStudio cloud is really useful for sharing code and working collaboratively as you can add different users to the project.

I'd recommend using RStudio locally (following [Setup 1]) to start with. If you are using RStudio cloud you'll need to make a new workspace and upload the files we are using here with the upload button....

```{r echo=FALSE, out.width = "400pt", fig.align='center', cache=TRUE}
knitr::include_graphics('prac1_images/upload.png') 
```

If you upload a shapefile you will need to incldue all the relevant files and upload them to RStudio cloud as a ```.zip```

<!--chapter:end:00-software.Rmd-->


```{r include = FALSE}
htmltools::tagList(rmarkdown::html_dependency_font_awesome())
```
# External usage {-}

## Statement of need {-}
x
## How to adapt this course {-}

## License {-}

If you use this material for teaching, research or anything else please let me (Andy) know via [Twitter](https://twitter.com/andymaclachlan) or email --- a [dot] maclachlan [at] ucl [dot] ac [dot] uk).

This practical book is licensed under a [Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0) License](https://creativecommons.org/licenses/by-sa/4.0/).
<center>
<i class="fab fa-creative-commons fa-2x"></i><i class="fab fa-creative-commons-by fa-2x"></i><i class="fab fa-creative-commons-sa fa-2x"></i>
</center>

You are free to: 

* **Share** — copy and redistribute the material in any medium or format

* **Adapt** — remix, transform, and build upon the material
for any purpose, even commercially.

However, you  give appropriate credit, provide a link to the license, and indicate if changes were made. If you remix, transform, or build upon the material, you must distribute your contributions under the same license as the original.

But, you do not have to comply with the license for elements of the material in the public domain or where your use is permitted by an applicable exception or limitation.

The code within this pracical book is available under the [MIT license](https://opensource.org/licenses/MIT); so it is free to use (for any purpose) as long as you cite the source.

## Version {-}

This is version 2.0 of the practical book


## Packages {-}

This bookdown document was built with:

```{r message = FALSE, warning = FALSE, echo = FALSE}
library(tidyverse)
library(devtools)
library(DT)

# needed because new_session is set to true in _bookdown.yml
all_pkgs <- renv::dependencies(path = "DESCRIPTION") %>% 
  pull(Package) 

session <- devtools::session_info(pkgs = all_pkgs)

session$platform
```

And makes use of the following packacges throughout. Thanks to [STAT 545](https://stat545.com/index.html#other-contributors) for this code.

```{r message = FALSE, warning = FALSE, echo = FALSE}
session$packages %>% 
  select(package, loadedversion, date, source) %>% 
  DT::datatable(rownames = FALSE,
                class = 'cell-border stripe',
                filter = list(position = 'top'),
                options = list(pageLength = nrow(session$packages), 
                           autoWidth = TRUE,
                           bInfo = FALSE,
                           paging = FALSE))
```

<!--chapter:end:00-usage.Rmd-->

# test

```{r interactive, fig.cap="The blue markers indicate where the authors are from. The basemap is a tiled image of the Earth at night provided by NASA. Interact with the online version at geocompr.robinlovelace.net, for example by zooming in and clicking on the popups.", out.width="100%", fig.scap="Where the authors are from.", echo=FALSE}
if(knitr::is_latex_output()){
    knitr::include_graphics("interactive.png")   
} else if(knitr::is_html_output()){
     #library(leaflet)
     #popup = c("Robin", "Jakub", "Jannes")
     #interactive = leaflet() %>%
      # addProviderTiles("NASAGIBS.ViirsEarthAtNight2012") %>%
       #addMarkers(lng = c(-3, 23, 11),
        #          lat = c(52, 53, 49), 
         #         popup = popup)  
     #library(htmlwidgets)
     #saveWidget(interactive, file = "interactive.html")
     #file.copy("interactive.html", "Prac1_data/interactive.html")
    knitr::include_url("Prac1_data/interactive.html")
}
```

<!--chapter:end:test.Rmd-->

